apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: pod-annotate
  labels:
    app: k8s-webhook
    purpose: pod-annotations
webhooks:
  - name: example-webhook.default.svc.cluster.local
    admissionReviewVersions:
    - v1beta1
    sideEffects: None
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tDQpNSUlEZERDQ0FseWdBd0lCQWdJVUs0RGRZMWVBdzY3eithRU54ci9oNDY1ZERiNHdEUVlKS29aSWh2Y05BUUVMDQpCUUF3VWpFTE1Ba0dBMVVFQmhNQ1FWVXhFREFPQmdOVkJBZ1RCMFY0WVcxd2JHVXhFakFRQmdOVkJBY1RDVTFsDQpiR0p2ZFhKdVpURVFNQTRHQTFVRUNoTUhSWGhoYlhCc1pURUxNQWtHQTFVRUN4TUNRMEV3SGhjTk1qTXhNRE14DQpNVFV3TWpBd1doY05Namd4TURJNU1UVXdNakF3V2pCU01Rc3dDUVlEVlFRR0V3SkJWVEVRTUE0R0ExVUVDQk1IDQpSWGhoYlhCc1pURVNNQkFHQTFVRUJ4TUpUV1ZzWW05MWNtNWxNUkF3RGdZRFZRUUtFd2RGZUdGdGNHeGxNUXN3DQpDUVlEVlFRTEV3SkRRVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0NBUW9DZ2dFQkFNZGFxUEh3DQo2RmtYTGZQelZYYzBDUUp2Q1N2RVpPWDJhUU9ZYXNpcW11WkszOE82V2hqanBjaE9qZlY2TGh6RlVXdEViMW5kDQplRHpEUU43Y0t6Um5zRFNDVzhZVEJlUkVreHdhdE05UHJ1d2hBOEs1V0Q3MFExSStsRld1SjN0aHZEdTR4bHYwDQp1QllESFA3MHdaRUpCVjJUMzBpZXc4UjV1RFhMZDdYajB0c3A5Q3RneEc4WVYxamE4MGtsT2huSkdkSjE1TXdNDQpaWVd5S2lZZ2VuR0ZzYzZtTEdUTVFjcDgrMFd1dGEvOGV4a0prbThVWGN1UkJ1by9nemszZXhDUjFVNXlyZWd0DQo0Q1hrU1lDKzFFbUtIZUxlQ3dHS0I3cCtGWWlwblVmdkxibW9oODd3cVYzOTc5a3hLQkpKYlR6RHVjUzhHSzdIDQpSbWdvbzNZeDlxbmIvemNDQXdFQUFhTkNNRUF3RGdZRFZSMFBBUUgvQkFRREFnRUdNQThHQTFVZEV3RUIvd1FGDQpNQU1CQWY4d0hRWURWUjBPQkJZRUZDaEkySmFvb1J5OUt6WXMvNW1YRFZZQnRhd3VNQTBHQ1NxR1NJYjNEUUVCDQpDd1VBQTRJQkFRQXVRT2RORlViN2dMa0xFUmtJSktHM0t6N0l1cDJwNFZUUmt2L1NHaGhnSm1EdTZEV3BMOFpVDQoyZGN1b0ROQnBnc3NqODNhdE9KZW54Qm1neU1QUC9pTmozWmxmYWNYeVdoTFA2NnkzNE8wUlZZN0NBbWFKQnFVDQpuWmpyN2hId3dvem9DaU5NTnVvb1FPejFCaXJ6MzR5V3NDaDFaQTlvdjZqRkE1UzBucSsxYUpSZlFwM0FKREhzDQpJQWdTNHhJMEpVZFA2SE00RTFmT2pMdE5ZZ3Y5RXdna0NMU3BSbWVHYWw3VzNUcTdURFRUd0hKRmJWVERkRzgxDQpEUDRIZ3V4MDVFMmM4ampMaU1rUFZ2eHN5TWJwcXBxTTNWbUhjdzk4QUdPN2ZpUGQyWDk4R2E4T0xMcjB4WUp3DQoyc283R0tBZmNoeklQZE9HTStWekVIa1hYSnQ4MEhJWg0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQ0K
      service:
        name: example-webhook
        namespace: default
        path: "/mutate"
    rules:
      - operations: ["CREATE"]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
#    namespaceSelector:
#      matchLabels:
#        mutateme: enabled